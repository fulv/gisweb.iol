[Workflow]
Id:,iol_workflow_ciccio
Title:,Istanze OnLine Workflow
Description:,
Initial state:,avvio
Type:,Workflow
State variable:,review_state

[State]
Id:,archiviata
Title:,
Description:,
Transitions,
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,assegnata
Title:,Assegnata in fase di istruttoria
Description:,
Transitions,"istruttoria_completata, preavviso_rigetto, sospendi"
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor

[State]
Id:,autorizzata
Title:,Autorizzazione protocollata
Description:,
Transitions,archivia
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,avvio
Title:,Nuovo documento in compilazione
Description:,
Transitions,invia_domanda
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,istruttoria_ok
Title:,In attesa di autorizzazione
Description:,
Transitions,"autorizza, torna_istruttoria"
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,pre_rigetto
Title:,In preavviso di rigetto
Description:,In preavviso di rigetto
Transitions,"rigetta, torna_istruttoria"
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,presentata
Title:,Domanda arrivata e protocollata
Description:,
Transitions,"assegna, protocolla"
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,rigettata
Title:,Diniego protocollato ed inviato
Description:,
Transitions,archivia
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[State]
Id:,sospesa
Title:,Pratica sospesa in attesa di integrazioni
Description:,
Transitions,"Integra, torna_istruttoria"
Permissions,Acquire,Anonymous,Manager,Owner,Reader,Editor,Contributor
CMFPlomino: Read documents,Y,N,N,N,N,N,N

[Transition]
Id:,Integra
Title:,Richiedi Integrazione
Description:,Invia integrazione
Details:,Richiesta di integrazione: PRESENTE SOLO SE è STATO COMPILATO IL MOTIVO DELLA SOSPENSIONE
Target state:,assegnata
Trigger:,User
Script after:,after_richiesta_integrazione

[Transition]
Id:,archivia
Title:,Archivia
Description:,
Details:,Per archiviare la pratica . Attenzione la pratica......
Target state:,archiviata
Trigger:,User
Script after:,after_archivia

[Transition]
Id:,assegna
Title:,Assegna
Description:,Avvio del procedimento
Details:,La domanda è stata presentata occorre assegnare l'istruttore per avviare il procedimento
Target state:,assegnata
Trigger:,User
Guard expression:,python: scripts.guard_assegna(state_change)
Script after:,after_assegna

[Transition]
Id:,autorizza
Title:,Autorizza
Description:,Autorizza
Details:,L'autorizzazione è pronta per essere inviata clicca su per inviare l'autorizzazione (protocollo + invio) (quindi il doc va creato qui???)
Target state:,autorizzata
Trigger:,User
Guard expression:,python: scripts.guard_autorizza(state_change)
Script after:,after_autorizza

[Transition]
Id:,genera_altri_documenti
Title:,
Description:,Genera Documento
Target state:,
Trigger:,User

[Transition]
Id:,invia_domanda
Title:,Invia domanda
Description:,Invia la domanda
Details:,"Attenzione la domanda può essere inviata solo se tutti i campi, tranne quelli bordati di verde, sono compilati correttamente."
Target state:,presentata
Trigger:,User
Guard expression:,python: scripts.guard_invia_domanda(state_change)
Script before:,before_invia_domanda
Script after:,after_invia_domanda

[Transition]
Id:,istruttoria_completata
Title:,Verifica
Description:,Istruttoria completata
Details:,Se l'istruttoria è completata clicca su per passare alla fase di autorizzazione (IL SISTEMA VERIFICA CHE L'ISTRUTTORIA SIA COMPLETA)
Target state:,istruttoria_ok
Trigger:,User
Guard expression:,python: scripts.guard_istruttoria_ok(state_change)
Script after:,after_verifica_istruttoria

[Transition]
Id:,preavviso_rigetto
Title:,Preavviso di rigetto
Description:,Preavviso di rigetto
Details:,Per portare la pratica in stato di preavviso di rigetto clicca su
Target state:,pre_rigetto
Trigger:,User
Script after:,after_preavviso_rigetto

[Transition]
Id:,protocolla
Title:,Richiedi protocollo
Description:,Richiedi protocollo
Details:,Attenzione la domanda non è stata protocollata correttamente.
Target state:,presentata
Trigger:,User
Guard expression:,python: scripts.guard_protocolla(state_change)
Script before:,before_protocolla
Script after:,after_protocolla

[Transition]
Id:,rigetta
Title:,Rigetta Istanza
Description:,Rigetta Istanza
Details:,Rigetto della domanda: PRESENTE SOLO SE è STATO COMPILATO IL MOTIVO DEL RIGETTO
Target state:,rigettata
Trigger:,User
Guard expression:,python: scripts.guard_is_istruttore(state_change)
Script after:,after_rigetta

[Transition]
Id:,sospendi
Title:,Sospendi
Description:,Sospensione e richiesta integrazione
Details:,Per portare la pratica in stato di sospensione clicca su
Target state:,sospesa
Trigger:,User
Guard expression:,python: scripts.guard_sospendi(state_change)
Script before:,before_sospendi
Script after:,after_sospendi

[Transition]
Id:,torna_istruttoria
Title:,Ritorna
Description:,Torna a Istruttoria
Details:,Se si desidera riportare la pratica in stato di istruttoria clicca su
Target state:,assegnata
Trigger:,User
Guard expression:,python: scripts.guard_is_istruttore(state_change)
Script after:,after_torna_istruttoria

























