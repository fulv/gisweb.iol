<tal:def tal:define="    title python:options['field'].title;    ttip_title title;    ttip_descr python:options['field'].Schema()['fieldDescription'].getAccessor(options['field'])();    id options/fieldname;">    <tal:def1 tal:define="id options/fieldname;v options/fieldvalue">        <tal:cond tal:condition="v">            <div tal:attributes="class string:control-group">                <label style="font-weight:bold;" tal:content="python:'%s: ' % title">Titolo</label>                <ol>                    <tal:block tal:define="attachments options/fieldvalue;                                           filenames attachments/keys|nothing"                                tal:repeat="attachment filenames"><li>                        <tal:block tal:define="contenttype python:attachments[attachment]">                            <a tal:condition="python:not(contenttype.startswith('image'))" href="#" tal:attributes="href python:'getfile?filename='+attachment" tal:content="attachment">filename</a>                            <a tal:condition="python:contenttype.startswith('image')" href="#" tal:attributes="href python:'getfile?filename='+attachment">                                <img tal:attributes="src python:'getfile?filename='+attachment" /></a>                        </tal:block><br>                        <div style="width:200 px; font-size:80%; text-align:left;">(<b tal:content="python: '%s...' % ttip_descr[:ttip_descr[:50].rfind(' ')]"></b> <i tal:condition="ttip_title" class="icon-info-sign" tal:attributes="title ttip_title;data-content ttip_descr"></i>)</div>                        </li>                    </tal:block>                </ol>            </div>        </tal:cond>    </tal:def1></tal:def>